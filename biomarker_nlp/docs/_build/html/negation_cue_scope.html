

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>negation_cue_scope module &mdash; Biomarker_NLP 0.0.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="negation_negbert module" href="negation_negbert.html" />
    <link rel="prev" title="biomarker_extraction module" href="biomarker_extraction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Biomarker_NLP
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">biomarker_nlp</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="biomarker_extraction.html">biomarker_extraction module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">negation_cue_scope module</a></li>
<li class="toctree-l2"><a class="reference internal" href="negation_negbert.html">negation_negbert module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Biomarker_NLP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">biomarker_nlp</a> &raquo;</li>
        
      <li>negation_cue_scope module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/negation_cue_scope.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-negation_cue_scope">
<span id="negation-cue-scope-module"></span><h1>negation_cue_scope module<a class="headerlink" href="#module-negation_cue_scope" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="negation_cue_scope.negation_detect">
<span class="sig-prename descclassname"><span class="pre">negation_cue_scope.</span></span><span class="sig-name descname"><span class="pre">negation_detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelCue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/negation_cue_scope.html#negation_detect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#negation_cue_scope.negation_detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect if a sentence contains any negation cues.</p>
<p>This function predicts if a sentence contains any negation words by using a pre-trained negation detection model that was pre-trained through Aditya and Suraj’s (2020) NegBERT transfer learning program.
Please see the reference link: <a class="reference external" href="https://github.com/adityak6798/Transformers-For-Negation-and-Speculation">https://github.com/adityak6798/Transformers-For-Negation-and-Speculation</a>. The model was trained using ‘bioscope_abstracts’ and ‘bioscope_full_papers’ corpora.
It was upload to a cloud repository and was freely available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – a single sentence.</p></li>
<li><p><strong>modelCue</strong> (<em>torch model</em>) – pre-trained negation cue detection model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if any negation cues are detected.
False if no negation cues are detected.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#negation_cue_scope.negation_scope" title="negation_cue_scope.negation_scope"><code class="xref py py-obj docutils literal notranslate"><span class="pre">negation_scope</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>NVIDIA GPU will be required. Make sure your machine brings NVIDIA GPU or set GPU as Hardware accelerator if using Colab notebook.</p>
<p class="rubric">Examples</p>
<p>Install the necessary packages, and make sure to turn the GPU Hardware accelerator on.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; If using Colab Notebook, use !pip instead pip.
$ pip install biomarker_nlp
$ pip install transformers
$ pip install knockknock==0.1.7
$ pip install sentencepiece
</pre></div>
</div>
<p>Load the necessary packages and pre-trained model</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biomarker_nlp</span> <span class="kn">import</span> <span class="n">negation_cue_scope</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biomarker_nlp.negation_negbert</span> <span class="kn">import</span> <span class="o">*</span> <span class="c1"># This code MUST be run before loading the pre-trained negation models</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modelCue</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;/path/to/negation/cue/detection/model&#39;</span><span class="p">)</span> <span class="c1"># path to the location where the model file is placed</span>
</pre></div>
</div>
<p>Examples (predict negation)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;TECENTRIQ is not indicated for use in combination with paclitaxel for the treatment of adult patients with unresectable locally advanced or metastatic TNBC.&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negation_cue_scope</span><span class="o">.</span><span class="n">negation_detect</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">txt</span><span class="p">,</span> <span class="n">modelCue</span> <span class="o">=</span> <span class="n">modelCue</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;KEYTRUDA is not recommended for treatment of patients with PMBCL who require urgent cytoreductive therapy.&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negation_cue_scope</span><span class="o">.</span><span class="n">negation_detect</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">txt</span><span class="p">,</span> <span class="n">modelCue</span> <span class="o">=</span> <span class="n">modelCue</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;KEYTRUDA is indicated for the treatment of adult patients with relapsed or refractory classical Hodgkin lymphoma (cHL).&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negation_cue_scope</span><span class="o">.</span><span class="n">negation_detect</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">txt</span><span class="p">,</span> <span class="n">modelCue</span> <span class="o">=</span> <span class="n">modelCue</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="negation_cue_scope.negation_scope">
<span class="sig-prename descclassname"><span class="pre">negation_cue_scope.</span></span><span class="sig-name descname"><span class="pre">negation_scope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelCue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelScope</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/negation_cue_scope.html#negation_scope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#negation_cue_scope.negation_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the scope of negation in a sentence.</p>
<p>This function predicts the negation cues and their scope in a sentence by using two pre-trained negation models that were pre-trained through Aditya and Suraj’s (2020) NegBERT transfer learning program.
Please see the reference link: <a class="reference external" href="https://github.com/adityak6798/Transformers-For-Negation-and-Speculation">https://github.com/adityak6798/Transformers-For-Negation-and-Speculation</a>. The models were trained using ‘bioscope_abstracts’ and ‘bioscope_full_papers’ corpora.
One of them is used to performed negation cue detection and negation scope resolution. Another one is used to performed negation scope resolution. They were upload to a cloud repository and were freely available.
This function predicts negation cues first through the negation cue detection model. If any negation cues were predicted, it predicts the scope of each negation cue, if there are more than one, through the negation scope resolution model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>str</em>) – a single sentence.</p></li>
<li><p><strong>modelCue</strong> (<em>torch model</em>) – pre-trained negation cue prediction model</p></li>
<li><p><strong>modelScopre</strong> (<em>torch model</em>) – pre-trained negation scope prediction model</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of negated clauses. Some sentences would contain more than one negation cue, in this case, all of their negated clauses will be extracted. If no negation is found, return an empty list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#negation_cue_scope.negation_detect" title="negation_cue_scope.negation_detect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">negation_detect</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>The negation cue will not be extracted.
NVIDIA GPU will be required. Make sure your machine brings NVIDIA GPU or set GPU as Hardware accelerator if using Colab notebook.</p>
<p class="rubric">Examples</p>
<p>Install the necessary packages, and make sure to turn the GPU Hardware accelerator on.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; If using Colab Notebook, use !pip instead pip.
$ pip install biomarker_nlp
$ pip install transformers
$ pip install knockknock==0.1.7
$ pip install sentencepiece
</pre></div>
</div>
<p>Load the necessary packages and pre-trained model</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biomarker_nlp</span> <span class="kn">import</span> <span class="n">negation_cue_scope</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biomarker_nlp.negation_negbert</span> <span class="kn">import</span> <span class="o">*</span> <span class="c1"># This code MUST be run before loading the pre-trained negation models</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modelCue</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;/path/to/negation/cue/detection/model&#39;</span><span class="p">)</span> <span class="c1"># path to the location where the model file is placed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">modelScope</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;/path/to/negation/scope/detection/model&#39;</span><span class="p">)</span> <span class="c1"># path to the location where the model file is placed</span>
</pre></div>
</div>
<p>Examples (predict negation scope)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;TECENTRIQ is not indicated for use in combination with paclitaxel for the treatment of adult patients with unresectable locally advanced or metastatic TNBC.&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negation_cue_scope</span><span class="o">.</span><span class="n">negation_scope</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">txt</span><span class="p">,</span> <span class="n">modelCue</span> <span class="o">=</span> <span class="n">modelCue</span><span class="p">,</span> <span class="n">modelScope</span> <span class="o">=</span> <span class="n">modelScope</span><span class="p">)</span>
<span class="go">[&#39;TECENTRIQ is&#39;, &#39;indicated for use in combination with paclitaxel for&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;KEYTRUDA is not recommended for treatment of patients with PMBCL who require urgent cytoreductive therapy.&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">negation_cue_scope</span><span class="o">.</span><span class="n">negation_scope</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">txt</span><span class="p">,</span> <span class="n">modelCue</span> <span class="o">=</span> <span class="n">modelCue</span><span class="p">,</span> <span class="n">modelScope</span> <span class="o">=</span> <span class="n">modelScope</span><span class="p">)</span>
<span class="go">[&#39;KEYTRUDA is&#39;, &#39;recommended for treatment of patients with PMBCL who&#39;]</span>
</pre></div>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="negation_negbert.html" class="btn btn-neutral float-right" title="negation_negbert module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="biomarker_extraction.html" class="btn btn-neutral float-left" title="biomarker_extraction module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Junxia Lin, Yuezheng He, Subha Madhavan, Chul Kim, Simina M. Boca.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>